Day 5: Invoice Editor View — Comprehensive Execution Plan
Executive Summary
Day 5 builds the complete Invoice Editor — the most complex and feature-rich view in the application. This includes the line item editor with sections, items, and discounts, client selector, date pickers, live calculations, and sticky header/footer for mobile. This is the heart of the application where invoices are created and modified.

Pre-Implementation: Day 4 Verification
Before proceeding, confirm Day 4 completion:

Markdown

## Day 4 Completion Checklist
- [ ] InvoiceFilterTabs with status counts
- [ ] InvoiceTable (desktop) with all columns
- [ ] InvoiceCard (mobile) with responsive switch
- [ ] Contextual row actions per invoice status
- [ ] Filter state management working
- [ ] Navigation to editor pages working
- [ ] All components support dark mode
Day 5 Execution Plan — Phased Breakdown
text

┌─────────────────────────────────────────────────────────────────────────────┐
│                          DAY 5: EXECUTION PHASES                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  PHASE 1 ──► UI Components Setup                                            │
│              └── Select, Popover, Calendar, Command components              │
│                                                                             │
│  PHASE 2 ──► Invoice Calculation Utilities                                  │
│              └── Line item totals, subtotal, discount, total                │
│                                                                             │
│  PHASE 3 ──► Line Item Row Components                                       │
│              └── SectionRow, ItemRow, DiscountRow                           │
│                                                                             │
│  PHASE 4 ──► Line Item Editor                                               │
│              └── Container with add/remove functionality                    │
│                                                                             │
│  PHASE 5 ──► Client Selector (Combobox)                                     │
│              └── Searchable client dropdown                                 │
│                                                                             │
│  PHASE 6 ──► Date Picker Component                                          │
│              └── Calendar popover for issue/due dates                       │
│                                                                             │
│  PHASE 7 ──► Invoice Form & Totals                                          │
│              └── Complete form with all sections                            │
│                                                                             │
│  PHASE 8 ──► Invoice Editor Page                                            │
│              └── Sticky header, footer, full integration                    │
│                                                                             │
│  PHASE 9 ──► Validation & QA                                                │
│              └── Calculations, responsive, accessibility                    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
Phase 1: UI Components Setup
1.1 Phase Objectives
Create Select component for unit type dropdown
Create Popover component for date picker
Create Command component for client search
These are prerequisites for the Invoice Editor
1.2 Phase Checklist
Markdown

## Phase 1 Checklist
- [ ] Install Radix primitives (select, popover, command)
- [ ] Create Select component
- [ ] Create Popover component
- [ ] Create Badge component (for line item types)
- [ ] Update UI components index
1.3 Implementation
Step 1.3.1: Install Required Radix Primitives

Bash

npm install @radix-ui/react-select @radix-ui/react-popover cmdk date-fns
Step 1.3.2: Create Select Component

React

// app/frontend/components/ui/select.tsx
import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { Check, ChevronDown, ChevronUp } from "lucide-react"
import { cn } from "@/lib/utils"

const Select = SelectPrimitive.Root
const SelectGroup = SelectPrimitive.Group
const SelectValue = SelectPrimitive.Value

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex h-10 w-full items-center justify-between rounded-md",
      "bg-white dark:bg-slate-950",
      "border border-slate-300 dark:border-slate-700",
      "px-3 py-2 text-sm",
      "text-slate-900 dark:text-slate-100",
      "placeholder:text-slate-400",
      "focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",
      "disabled:cursor-not-allowed disabled:opacity-50",
      "[&>span]:line-clamp-1",
      className
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
))
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
))
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
))
SelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = "popper", ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        "relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md",
        "bg-white dark:bg-slate-900",
        "border border-slate-200 dark:border-slate-800",
        "shadow-brutal",
        "data-[state=open]:animate-in data-[state=closed]:animate-out",
        "data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
        "data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",
        "data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2",
        "data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        position === "popper" &&
          "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
        className
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          "p-1",
          position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
))
SelectContent.displayName = SelectPrimitive.Content.displayName

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label
    ref={ref}
    className={cn("py-1.5 pl-8 pr-2 text-sm font-semibold", className)}
    {...props}
  />
))
SelectLabel.displayName = SelectPrimitive.Label.displayName

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm",
      "py-1.5 pl-8 pr-2 text-sm outline-none",
      "text-slate-900 dark:text-slate-100",
      "focus:bg-slate-100 dark:focus:bg-slate-800",
      "data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>
    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
))
SelectItem.displayName = SelectPrimitive.Item.displayName

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 
